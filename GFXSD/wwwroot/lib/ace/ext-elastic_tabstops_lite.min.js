define("ace/ext/elastic_tabstops_lite",["require","exports","module","ace/editor","ace/config"],function(t,e,o){"use strict";i.prototype.processRows=function(t){this.$inChange=!0;for(var e=[],o=0,s=t.length;o<s;o++){var i=t[o];if(!(-1<e.indexOf(i)))for(var i=this.$findCellWidthsForBlock(i),n=this.$setBlockCellWidthsToMax(i.cellWidths),r=i.firstRow,h=0,a=n.length;h<a;h++){var c=n[h];e.push(r),this.$adjustRow(r,c),r++}}this.$inChange=!1},i.prototype.$findCellWidthsForBlock=function(t){for(var e,o=[],s=t;0<=s&&0!=(e=this.$cellWidthsForRow(s)).length;)o.unshift(e),s--;for(var i=s+1,s=t,n=this.$editor.session.getLength();s<n-1&&0!=(e=this.$cellWidthsForRow(++s)).length;)o.push(e);return{cellWidths:o,firstRow:i}},i.prototype.$cellWidthsForRow=function(t){for(var e=this.$selectionColumnsForRow(t),o=[-1].concat(this.$tabsForRow(t)),s=o.map(function(t){return 0}).slice(1),i=this.$editor.session.getLine(t),n=0,r=o.length-1;n<r;n++){var h=o[n]+1,a=o[n+1],c=this.$rightmostSelectionInCell(e,a),a=i.substring(h,a);s[n]=Math.max(a.replace(/\s+$/g,"").length,c-h)}return s},i.prototype.$selectionColumnsForRow=function(t){var e=[],o=this.$editor.getCursorPosition();return this.$editor.session.getSelection().isEmpty()&&t==o.row&&e.push(o.column),e},i.prototype.$setBlockCellWidthsToMax=function(t){for(var e,o,s=!0,i=this.$izip_longest(t),n=0,r=i.length;n<r;n++){var h=i[n];if(h.push){h.push(NaN);for(var a=0,c=h.length;a<c;a++){var l=h[a];if(s&&(e=a,o=0,s=!1),isNaN(l)){for(var p=a,u=e;u<p;u++)t[u][n]=o;s=!0}o=Math.max(o,l)}}else console.error(h)}return t},i.prototype.$rightmostSelectionInCell=function(t,e){var o=0;if(t.length){for(var s=[],i=0,n=t.length;i<n;i++)t[i]<=e?s.push(i):s.push(0);o=Math.max.apply(Math,s)}return o},i.prototype.$tabsForRow=function(t){for(var e,o=[],s=this.$editor.session.getLine(t),i=/\t/g;null!=(e=i.exec(s));)o.push(e.index);return o},i.prototype.$adjustRow=function(t,e){var o=this.$tabsForRow(t);if(0!=o.length)for(var s=0,i=-1,n=this.$izip(e,o),r=0,h=n.length;r<h;r++){var a,c,l=n[r][0],p=n[r][1],l=(i+=1+l)-(p+=s);0!=l&&(a=(c=this.$editor.session.getLine(t).substr(0,p)).replace(/\s*$/g,""),c=c.length-a.length,0<l&&(this.$editor.session.getDocument().insertInLine({row:t,column:p+1},Array(1+l).join(" ")+"\t"),this.$editor.session.getDocument().removeInLine(t,p,p+1),s+=l),l<0&&-l<=c&&(this.$editor.session.getDocument().removeInLine(t,p+l,p),s+=l))}},i.prototype.$izip_longest=function(t){if(!t[0])return[];for(var e=t[0].length,o=t.length,s=1;s<o;s++){var i=t[s].length;e<i&&(e=i)}for(var n=[],r=0;r<e;r++){for(var h=[],s=0;s<o;s++)""===t[s][r]?h.push(NaN):h.push(t[s][r]);n.push(h)}return n},i.prototype.$izip=function(t,e){for(var o=(t.length>=e.length?e:t).length,s=[],i=0;i<o;i++){var n=[t[i],e[i]];s.push(n)}return s};var s=i;function i(t){this.$editor=t;var e=this,o=[],s=!1;this.onAfterExec=function(){s=!1,e.processRows(o),o=[]},this.onExec=function(){s=!0},this.onChange=function(t){s&&(-1==o.indexOf(t.start.row)&&o.push(t.start.row),t.end.row!=t.start.row&&o.push(t.end.row))}}e.ElasticTabstopsLite=s;e=t("../editor").Editor;t("../config").defineOptions(e.prototype,"editor",{useElasticTabstops:{set:function(t){t?(this.elasticTabstops||(this.elasticTabstops=new s(this)),this.commands.on("afterExec",this.elasticTabstops.onAfterExec),this.commands.on("exec",this.elasticTabstops.onExec),this.on("change",this.elasticTabstops.onChange)):this.elasticTabstops&&(this.commands.removeListener("afterExec",this.elasticTabstops.onAfterExec),this.commands.removeListener("exec",this.elasticTabstops.onExec),this.removeListener("change",this.elasticTabstops.onChange))}}})}),window.require(["ace/ext/elastic_tabstops_lite"],function(t){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=t)});